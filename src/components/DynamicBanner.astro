---
import { backgroundAssets } from '../assets';

export interface Props {
    pageType: 'home' | 'about' | 'services' | 'contact' | 'default';
    title: string;
    description: string;
    ctaText?: string;
    ctaLink?: string;
    customBackground?: string;
}

const { 
    pageType, 
    title, 
    description, 
    ctaText = "Learn More", 
    ctaLink = "#",
    customBackground 
} = Astro.props;

// Obtener el fondo según el tipo de página
const backgroundImage = customBackground || backgroundAssets[pageType];
const imageSrc = typeof backgroundImage === 'string' ? backgroundImage : backgroundImage?.src;

// Configuración unificada: texto blanco para todos los banners, sin overlays
// Optimizado para máxima legibilidad y consistencia UX/UI

const titleClasses = "text-4xl md:text-6xl lg:text-7xl font-bold mb-6 !text-white font-poppins tracking-tight text-shadow-strong";

const descriptionClasses = "text-lg md:text-xl lg:text-2xl mb-8 !text-gray-200 font-noto font-medium max-w-3xl mx-auto leading-relaxed text-shadow-subtle";

// Sin overlay en ningún banner para diseño limpio
const overlayClasses = "";

// Clase unificada para contenedor de texto - diseño consistente
const textContainerClasses = "relative z-20 flex flex-col items-center justify-center h-full px-6 text-center";
---

<div class="dynamic-banner relative w-full h-screen overflow-hidden">
    <!-- Imagen de fondo -->
    <div class="absolute inset-0 z-0">
        <img 
            src={imageSrc} 
            alt={`${pageType} background`} 
            class="w-full h-full object-cover"
        />
    </div>
    
    <!-- Contenido del banner -->
    <div class={textContainerClasses}>
        <div class="max-w-5xl mx-auto">
            <h1 class={titleClasses}>
                {title}
            </h1>
            <p class={descriptionClasses}>
                {description}
            </p>
            {ctaText && ctaLink && (
                <a 
                    href={ctaLink}
                    class="inline-block px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 font-roboto"
                >
                    {ctaText}
                </a>
            )}
        </div>
    </div>
    
    <!-- Efecto de partículas flotantes (opcional) -->
    <div class="absolute inset-0 z-15 pointer-events-none">
        <div class="particles-float"></div>
    </div>
</div>

<style>
    .dynamic-banner {
        /* Asegurar que el banner se vea por encima del patrón de fondo */
        position: relative;
        z-index: 1;
    }
    
    /* Text shadows optimizados para legibilidad en fondos oscuros */
    .text-shadow-strong {
        text-shadow: 
            0 0 10px rgba(0, 0, 0, 1),
            0 0 20px rgba(0, 0, 0, 0.9),
            0 4px 8px rgba(0, 0, 0, 0.9),
            0 8px 16px rgba(0, 0, 0, 0.8);
    }
    
    .text-shadow-light {
        text-shadow: 
            0 1px 3px rgba(0, 0, 0, 0.8),
            0 2px 6px rgba(0, 0, 0, 0.6);
    }
    
    .text-shadow-subtle {
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
    }
    
    .text-shadow-dark {
        text-shadow: 
            0 1px 2px rgba(255, 255, 255, 0.9),
            0 2px 4px rgba(255, 255, 255, 0.7);
    }
    
    /* Animación de entrada mejorada */
    .dynamic-banner .max-w-5xl {
        animation: fadeInUp 1.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(60px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Mejoras para accesibilidad y contraste */
    @media (prefers-reduced-motion: reduce) {
        .dynamic-banner .max-w-5xl {
            animation: none;
        }
        
        .particles-float::before,
        .particles-float::after {
            animation: none;
        }
    }
    
    /* Mejoras responsivas para móviles */
    @media (max-width: 768px) {
        .dynamic-banner h1 {
            font-size: 2.5rem;
            line-height: 1.1;
        }
        
        .dynamic-banner p {
            font-size: 1rem;
            line-height: 1.5;
        }
        
        .dynamic-banner .bg-black\/20 {
            padding: 1.5rem;
            margin: 0 1rem;
        }
    }
    
    /* Mejora del contraste en pantallas de alto contraste */
    @media (prefers-contrast: high) {
        .dynamic-banner .bg-black\/20 {
            background-color: rgba(0, 0, 0, 0.9) !important;
        }
    }
    
    /* Efecto de partículas flotantes */
    .particles-float::before,
    .particles-float::after {
        content: '';
        position: absolute;
        width: 4px;
        height: 4px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        animation: float 6s ease-in-out infinite;
    }
    
    .particles-float::before {
        top: 20%;
        left: 20%;
        animation-delay: 0s;
    }
    
    .particles-float::after {
        top: 60%;
        right: 30%;
        animation-delay: 3s;
    }
    
    @keyframes float {
        0%, 100% { 
            transform: translateY(0) rotate(0deg); 
            opacity: 0; 
        }
        50% { 
            transform: translateY(-100px) rotate(180deg); 
            opacity: 1; 
        }
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .dynamic-banner h1 {
            font-size: 3rem;
        }
        
        .dynamic-banner p {
            font-size: 1.125rem;
        }
    }
</style>