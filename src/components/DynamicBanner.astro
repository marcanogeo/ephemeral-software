---
import { backgroundAssets } from '../assets';

export interface Props {
    pageType: 'home' | 'about' | 'services' | 'contact' | 'default';
    title: string;
    description: string;
    ctaText?: string;
    ctaLink?: string;
    customBackground?: string;
}

const { 
    pageType, 
    title, 
    description, 
    ctaText = "Learn More", 
    ctaLink = "#",
    customBackground
} = Astro.props;

// Obtener el fondo según el tipo de página
const backgroundImage = customBackground || backgroundAssets[pageType];
const imageSrc = typeof backgroundImage === 'string' ? backgroundImage : backgroundImage?.src;

// Configuración profesional UX/UI
const titleClasses = "text-4xl md:text-6xl lg:text-7xl font-bold mb-6 !text-white font-poppins tracking-tight text-shadow-strong";
const descriptionClasses = "text-lg md:text-xl lg:text-2xl mb-8 !text-gray-200 font-noto font-medium max-w-3xl mx-auto leading-relaxed text-shadow-subtle";
const textContainerClasses = "relative z-20 flex flex-col items-center justify-center h-full px-6 text-center";
---

<div class="dynamic-banner relative w-full h-screen overflow-hidden" style="background: #04335C;">
    <!-- Imagen de fondo con transición suave -->
    <div class="absolute inset-0 z-0">
        <img 
            src={imageSrc} 
            alt={`${pageType} background`} 
            class="w-full h-full object-cover transition-opacity duration-700 ease-in-out"
            loading="eager"
            onload="this.style.opacity='1';"
            style="opacity: 0;"
        />
    </div>
    
    <!-- Contenido del banner -->
    <div class={textContainerClasses}>
        <div class="max-w-5xl mx-auto">
            <h1 class={titleClasses}>
                {title}
            </h1>
            <p class={descriptionClasses}>
                {description}
            </p>
            {ctaText && ctaLink && (
                <a 
                    href={ctaLink}
                    class="inline-block px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 font-roboto"
                    aria-label={`${ctaText} - ${pageType} section`}
                >
                    {ctaText}
                </a>
            )}
        </div>
    </div>
</div>

<style>
    /* =================================
       PROFESSIONAL BANNER COMPONENT
       ================================= */
    
    .dynamic-banner {
        /* Corporate foundation */
        background: var(--color-corporate-blue, #04335C);
        position: relative;
        z-index: 1;
        min-height: 100vh;
    }
    
    /* Professional text shadows for optimal readability */
    .text-shadow-strong {
        text-shadow: 
            0 2px 4px rgba(0, 0, 0, 0.8),
            0 4px 8px rgba(0, 0, 0, 0.6),
            0 8px 16px rgba(0, 0, 0, 0.4);
    }
    
    .text-shadow-subtle {
        text-shadow: 
            0 1px 3px rgba(0, 0, 0, 0.7),
            0 2px 6px rgba(0, 0, 0, 0.5);
    }
    
    /* Enhanced animations for professional feel */
    .dynamic-banner .text-center {
        animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
    }
    
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Image optimization */
    .dynamic-banner img {
        will-change: opacity;
        object-position: center center;
    }
    
    /* CTA button enhancements */
    .dynamic-banner a[aria-label*="section"] {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 4px 14px 0 rgba(0, 118, 255, 0.39);
    }
    
    .dynamic-banner a[aria-label*="section"]:hover {
        box-shadow: 0 6px 20px rgba(0, 118, 255, 0.5), 0 0 0 3px rgba(59, 130, 246, 0.15);
    }
    
    .dynamic-banner a[aria-label*="section"]:focus {
        outline: none;
        box-shadow: 0 6px 20px rgba(0, 118, 255, 0.5), 0 0 0 3px rgba(59, 130, 246, 0.5);
    }
    
    /* Responsive typography */
    @media (max-width: 768px) {
        .dynamic-banner h1 {
            font-size: 2.5rem;
            line-height: 1.1;
            padding-top: 14rem;
        }
        
        .dynamic-banner p {
            font-size: 1.125rem;
            margin-bottom: 1.5rem;
        }
        
        .dynamic-banner a[aria-label*="section"] {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            min-width: 160px;
        }
    }
    
    /* Performance optimizations */
    @media (prefers-reduced-motion: reduce) {
        .dynamic-banner .text-center {
            animation: none;
        }
        
        .dynamic-banner a[aria-label*="section"] {
            transition: none;
        }
    }
    
    /* High contrast support */
    @media (prefers-contrast: high) {
        .text-shadow-strong,
        .text-shadow-subtle {
            text-shadow: 
                0 0 2px #000,
                0 0 4px #000,
                0 0 6px #000;
        }
        
        .dynamic-banner a[aria-label*="section"] {
            border: 2px solid currentColor;
        }
    }
</style>
