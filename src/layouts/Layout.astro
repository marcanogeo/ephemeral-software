---
import Navbar from '../components/Navigation.astro';

export interface Props {
    pageTitle: string;
    pageDescription?: string;
    backgroundType?: 'home' | 'about' | 'services' | 'contact' | 'default';
    usePatternBackground?: boolean;
    canonicalUrl?: string;
}

const { 
    pageTitle, 
    pageDescription = "Ephemeral - Professional technology solutions for modern businesses",
    backgroundType = 'default', 
    usePatternBackground = true,
    canonicalUrl = Astro.url.href
} = Astro.props;

// SEO y performance optimizations
const siteName = "Ephemeral SL";
const defaultDescription = "Expert technology solutions, web development, and digital transformation services";
---
<!doctype html>
<html lang="es" class="h-full scroll-smooth">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content={pageDescription || defaultDescription} />
		<meta name="robots" content="index, follow" />
		<meta name="author" content={siteName} />
		
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:url" content={canonicalUrl} />
		<meta property="og:title" content={`${pageTitle} - ${siteName}`} />
		<meta property="og:description" content={pageDescription || defaultDescription} />
		<meta property="og:site_name" content={siteName} />
		
		<!-- Twitter -->
		<meta property="twitter:card" content="summary_large_image" />
		<meta property="twitter:url" content={canonicalUrl} />
		<meta property="twitter:title" content={`${pageTitle} - ${siteName}`} />
		<meta property="twitter:description" content={pageDescription || defaultDescription} />
		
		<!-- Canonical URL -->
		<link rel="canonical" href={canonicalUrl} />
		
		<!-- Favicon -->
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="apple-touch-icon" sizes="180x180" href="/favicon.svg" />
		
		<!-- Preconnect for performance -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		
		<!-- Generator -->
		<meta name="generator" content={Astro.generator} />
		
		<title>{pageTitle} - {siteName}</title>
	</head>
	<body class="h-full m-0 p-0 w-full antialiased">
		<!-- Skip to main content for accessibility -->
		<a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded-md z-50">
			Skip to main content
		</a>
		
		<Navbar />
		
		<main id="main-content" class="w-full min-h-screen relative" role="main">
		    <slot />
		</main>
		
		<!-- Structured Data for SEO -->
		<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "Organization",
			"name": "Ephemeral SL",
			"url": "https://ephemeralsoftware.com",
			"description": "Professional technology solutions and digital transformation services",
			"foundingDate": "2017",
			"industry": "Technology Services",
			"serviceType": ["Web Development", "Mobile Development", "Cloud Solutions", "UI/UX Design"]
		}
		</script>
	</body>
</html>

<style>
	/* =================================
	   CORPORATE DESIGN SYSTEM - EPHEMERAL SL
	   ================================= */
	
	/* Root Variables - Design Tokens */
	:root {
		/* Corporate Colors */
		--color-corporate-blue: #04335C;
		--color-semi-white: #fcffff;
		--color-text-primary: #1a202c;
		--color-text-secondary: #4a5568;
		--color-accent: #0075bc;
		
		/* Spacing Scale */
		--space-xs: 0.25rem;
		--space-sm: 0.5rem;
		--space-md: 1rem;
		--space-lg: 1.5rem;
		--space-xl: 2rem;
		--space-2xl: 3rem;
		
		/* Typography Scale */
		--font-size-sm: 0.875rem;
		--font-size-base: 1rem;
		--font-size-lg: 1.125rem;
		--font-size-xl: 1.25rem;
		--font-size-2xl: 1.5rem;
		--font-size-3xl: 1.875rem;
		--font-size-4xl: 2.25rem;
		
		/* Shadows */
		--shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
		--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
		--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
		
		/* Transitions */
		--transition-fast: 150ms ease-in-out;
		--transition-normal: 300ms ease-in-out;
		--transition-slow: 500ms ease-in-out;
	}
	
	/* Base Styles - Professional Foundation */
	*,
	*::before,
	*::after {
		box-sizing: border-box;
	}
	
	html {
		scroll-behavior: smooth;
		scroll-padding-top: 2rem;
	}
	
	body {
		position: relative;
		overflow-x: hidden;
		background: var(--color-semi-white);
		font-feature-settings: "kern" 1, "liga" 1;
		text-rendering: optimizeLegibility;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
	}
	
	/* Pattern Background Component */
	.pattern-background {
		background-color: var(--color-semi-white);
		background-image: url('/src/assets/patternsbg.jpg');
		background-size: cover;
		background-position: center;
		background-repeat: repeat;
		position: relative;
	}
	
	/* Enhanced overlay for better content legibility */
	.pattern-background::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: 1;
		background: linear-gradient(
			135deg,
			rgba(252, 255, 255, 0.92) 0%,
			rgba(248, 250, 252, 0.85) 50%,
			rgba(241, 245, 249, 0.88) 100%
		);
		pointer-events: none;
	}
	
	/* Content layering */
	.pattern-background > * {
		position: relative;
		z-index: 4;
	}
	
	/* Main content area */
	main {
		min-height: 100vh;
		background: inherit;
	}
	
	/* Accessibility - Screen Reader Only */
	.sr-only {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border: 0;
	}
	
	.focus\:not-sr-only:focus {
		position: static;
		width: auto;
		height: auto;
		padding: revert;
		margin: revert;
		overflow: visible;
		clip: auto;
		white-space: normal;
	}
	
	/* Focus management for better UX */
	:focus-visible {
		outline: 2px solid var(--color-accent);
		outline-offset: 2px;
	}
	
	/* Responsive optimizations */
	@media (max-width: 768px) {
		.pattern-background {
			background-attachment: scroll;
			background-size: cover;
		}
		
		:root {
			--space-lg: 1rem;
			--space-xl: 1.5rem;
			--space-2xl: 2rem;
		}
	}
	
	/* Reduced motion preferences */
	@media (prefers-reduced-motion: reduce) {
		html {
			scroll-behavior: auto;
		}
		
		*,
		*::before,
		*::after {
			animation-duration: 0.01ms !important;
			animation-iteration-count: 1 !important;
			transition-duration: 0.01ms !important;
		}
	}
	
	/* High contrast mode support */
	@media (prefers-contrast: high) {
		:root {
			--color-text-primary: #000000;
			--color-text-secondary: #333333;
		}
	}
	
	/* Print styles */
	@media print {
		body {
			background: white !important;
		}
		
		.pattern-background::before {
			display: none;
		}
	}
</style>

